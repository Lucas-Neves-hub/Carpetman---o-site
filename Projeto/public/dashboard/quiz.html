<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="../assets/icon/favicon2.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carpetman | Quiz de conhecimento</title>

    <link rel="stylesheet" href="./../css/dashboards.css">
    <link rel="stylesheet" href="./../css/estilo.css" />
    <script src="../js/sessao.js"></script>
    

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
</head>

<body onload="validarSessao()" style="background-color: black; color: aliceblue;">

    <div class="janela">


        <div class="header-left">

            <h1>Carpetman</h1>

            <div class="hello">
                <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
            </div>

            <div class="btn-nav-white">
                <a href="cards.html">
                    <h3>Videoclipes</h3>
                </a>
            </div>

            <div class="btn-nav-white">
                <a href="./dashboard.html">
                    <h3>Opiniões</h3>
                </a>
            </div>

            <div class="btn-nav">
                <h3>Quiz de conhecimento</h3>
            </div>

            <div class="btn-logout" onclick="limparSessao()">
                <h3>Sair</h3>
            </div>

        </div>
        <div id="coluna">

            <div id="blocos">

              <div id="bloco0">

                <h1>Questionário sobre o artista Carpetman. você pode conhecer mais sobre no <a href="http://localhost:8080/carpetman.html">Resumo</a></h1><br>
                <h1>Deseja começar?</h1>
                <button onclick="comecar()">Começar</button>
              </div>
                
              <!--Definição das perguntas-->
                <div id="blocoI"  style="display:none" >
        <h1>Questões Bloco I</h1>
  <h3>1. Por que Carpetman escolhe manter sua identidade em segredo?</h3>
  <select id="q1">
    <option value="0">Selecione...</option>
    <option value="a">Porque quer que o foco esteja em sua obra, não em sua vida pessoal.</option> certa----- 
    <option value="b">Porque teme perseguição política.</option> 
    <option value="c">Porque ainda não decidiu revelar quem é.</option>
    <option value="d">Porque faz parte de um contrato com sua gravadora.</option>
  </select>



  <h3>2. Quando o projeto Carpetman começou oficialmente?</h3>
  <select id="q2">
    <option value="0">Selecione...</option>
    <option value="a">Em 2023</option> certa----- 
    <option value="b">Em 2018</option>
    <option value="c">Em 2020</option> 
    <option value="d">Em 2015</option>
  </select>



  <h3>3. O que influenciou a paixão de Carpetman pela música?</h3>
  <select id="q3">
    <option value="0">Selecione...</option>
    <option value="a">Sua vida adulta</option>
    <option value="b">Sua infância</option> certa----- 
    <option value="c">Suas viagens profissionais</option>
    <option value="d">Seu período na faculdade</option>
  </select>



  <h3>4. O que simboliza o tapete estampado usado pelo artista?</h3>
  <select id="q4">
    <option value="0">Selecione...</option>
    <option value="a">A cultura e tradição da Ucrânia</option> certa----- 
    <option value="b">A modernidade da cultura digital</option> 
    <option value="c">Um movimento artístico secreto</option>
    <option value="d">Homenagem à música eletrônica</option>
  </select>



  <h3>5. Qual é a nacionalidade de Carpetman?</h3>
  <select id="q5">
    <option value="0">Selecione...</option>
    <option value="a">Russa</option>
    <option value="b">Americana</option>
    <option value="c">Ucraniana</option> certa----- 
    <option value="d">Islandesa</option>
  </select>

  <button onclick="validarB1()">Registrar e seguir para o Bloco II</button>
</div>

<div id="blocoII"  style="display:none">
 <h1>Questões Bloco II</h1>
  <h3>6. Como os elementos visuais contribuem para a obra de Carpetman?</h3>
  <select id="q6">
    <option value="0">Selecione...</option>
    <option value="a">São acessórios sem importância</option>
    <option value="b">Atrapalham a experiência sonora</option>
    <option value="c">Fazem parte essencial da expressão artística multimídia</option> certa----- 
    <option value="d">Servem apenas para ocultar sua identidade</option> 
  </select>



  <h3>7. Qual é o papel da dança em suas performances?</h3>
  <select id="q7">
    <option value="0">Selecione...</option>
    <option value="a">Fazer parte integral da arte e da performance </option> certa----- 
    <option value="b">Dar ritmo às músicas</option>
    <option value="c">Apenas preencher espaços vazios no palco</option> 
    <option value="d">Servir como aquecimento físico</option>
  </select>



  <h3>8. É possível apreciar a música de Carpetman sem ver os elementos visuais?</h3>
  <select id="q8">
    <option value="0">Selecione...</option>
    <option value="a">Sim, mas os elementos visuais elevam a experiência </option> certa----- 
    <option value="b">Não, pois tudo depende da performance</option> 
    <option value="c">Apenas em gravações ao vivo</option>
    <option value="d">Apenas se o áudio for remixado</option>
  </select>



  <h3>9. Quais gêneros influenciam claramente seu trabalho?</h3>
  <select id="q9">
    <option value="0">Selecione...</option>
    <option value="a">Bossa nova e samba</option>
    <option value="b">Blues e soul</option> certa----- 
    <option value="c">Pop coreano e metal</option>
    <option value="d">Jazz e sertanejo</option>
  </select>



  <h3>10. Como o material descreve a contribuição do blues e do soul para a música americana?</h3>
  <select id="q10">
  <option value="0">Selecione...</option>
    <option value="a">São gêneros derivados do rock moderno</option>
    <option value="b">São gêneros sem influência histórica significativa</option>
    <option value="c">Transformaram tradições africanas e caribenhas em algo tipicamente americano</option> certa----- 
    <option value="d">Foram criados exclusivamente na Europa</option>
  </select>
  <button onclick="validarB2()">Registrar e seguir para o Block III</button>
</div>

<div id="blocoIII" style="display:none">
   <h1>Questões Bloco III</h1>
  <h3>11. Quais tradições influenciaram o blues e o soul, segundo o texto?</h3>
  <select id="q11">
  <option value="0"> Selecione...</option>
    <option value="a">Africanas e caribenhas</option> certa----- 
    <option value="b">Tradicionais chinesas</option>
    <option value="c">Celtas e árabes</option>
    <option value="d">Japonesas</option>
  </select>



  <h3>12. Qual dessas é uma influência citada por Carpetman?</h3>
  <select id="q12">
    <option value="0">Selecione...</option>
    <option value="a">Pink Floyd</option>
    <option value="b">Kaleo</option> certa----- 
    <option value="c">Daft Punk</option>
    <option value="d">Queen</option>
  </select>



  <h3>13. O que caracteriza a voz de Carpetman?</h3>
  <select id="q13">
    <option value="0">Selecione...</option>
    <option value="a">Sons eletrônicos sintetizados</option>
    <option value="b">Semelhança com canto lírico italiano</option>
    <option value="c">Capacidade de evocar corais gospel e blues do Delta</option> certa----- 
    <option value="d">Estilo robótico proposital</option>
  </select>
  
  

  <h3>14. Como sua obra busca transcender as formas tradicionais de música?</h3>
  <select id="q14">
    <option value="0">Selecione...</option>
    <option value="a">Abandonando completamente o ritmo e a melodia</option>
    <option value="b">Integrando música, dança e elementos visuais em uma experiência multimídia</option> certa----- 
    <option value="c">Usando apenas instrumentos acústicos</option>
    <option value="d">Evitando qualquer tipo de influência externa</option>
</select>



  <h3>15. Como ele equilibra influências internacionais com sua herança pessoal?</h3>
  <select id="q15">
    <option value="0">Selecione...</option>
    <option value="a">Misturando referências globais enquanto preserva elementos de sua identidade ucraniana</option>certa----- 
    <option value="b">Ignorando suas raízes culturais</option> 
    <option value="c">Recriando músicas tradicionais de seu país sem mudanças</option>
    <option value="d">Seguindo rigorosamente estilos americanos tradicionais</option>
  </select>
  <button onclick="validarB3()">Concluir e exibir resultados</button>
</div>
</div>
<div id="id_dodiv"></div>
</diqv>

         

</div>
</body>
<script>
 /*(*) vetor gabarito com respostas corretas */
var gabarito = ['a','a','b','a','c','c','a','a','b','c','a','b','c','b','a']
/* vetor que armazena as respostas de cada bloco */
var respostaIn = []
/* (*)variavel global que armazena o index pra carregar entre blocos */
var ind = 0 
/* (*)var global de acertos e erros */
var acertos = 0
var erros = 0


/*(*) função que some com a tela de recepção e faz o bloco 1 aparecer */
function comecar(){
bloco0.style.display = 'none'
blocoI.style.display = 'block'





}


/*(*)funcao de respostas ao bloco 1*/

function validarB1(){
 
  
/* validação de se alguma questão deixou de ser respondida, ainda sem a mensagem de erro */
  if(q1.value != 0 && q2.value != 0 && q3.value != 0 && q4.value != 0 && q5.value != 0){
   respostaIn.push(q1.value)
   respostaIn.push(q2.value)
   respostaIn.push(q3.value)             /* se não, envia todas respostas pro vetor*/
   respostaIn.push(q4.value)
   respostaIn.push(q5.value)
   console.log(respostaIn)

  }

 /* (*) correção comparando com o gabarito indexado*/

if(respostaIn.length > 0){
  for (var index = ind; index < respostaIn.length; index++) {
    if(respostaIn[index] == gabarito[index]){acertos++}
   else if(respostaIn[index] != gabarito[index]){erros++}
 
    }
ind += 5
    console.log('erros:', erros, 'acertos:', acertos)
}

if(q1.value == 0 || q2.value == 0 || q3.value == 0 || q4.value == 0 || q5.value == 0){alert('Preencha todos os campos para prosseguir')}else{
blocoI.style.display= 'none'
 blocoII.style.display= 'block'}

}

/*(*)funcao de respostas ao bloco 2*/
function validarB2(){

/* validação de se alguma questão deixou de ser respondida, ainda sem a mensagem de erro */
if(q6.value != 0 && q7.value != 0 && q8.value != 0 && q9.value != 0 && q10.value != 0){
   respostaIn.push(q6.value)
   respostaIn.push(q7.value)
   respostaIn.push(q8.value)
   respostaIn.push(q9.value)              /* se não, envia todas respostas pro vetor*/
   respostaIn.push(q10.value)
   console.log(respostaIn)

}/* (*) correção comparando com o gabarito indexado*/

if(respostaIn.length > 5){
  for (var index = ind; index < respostaIn.length; index++) {
    if(respostaIn[index] == gabarito[index]){acertos++}
   else if(respostaIn[index] != gabarito[index]){erros++}
  
    }
ind += 5
    console.log('erros:', erros, 'acertos:', acertos)
}


if(q6.value == 0 || q7.value == 0 || q8.value == 0 || q9.value == 0 || q10.value == 0){alert('Preencha todos os campos para prosseguir')}else{
blocoII.style.display= 'none'
 blocoIII.style.display= 'block'}
}

/*(*)funcao de respostas ao bloco 3 e conclusão com correção*/
function validarB3(){

  if(q11.value != 0 && q12.value != 0 && q13.value != 0 && q14.value != 0 && q15.value != 0){
   respostaIn.push(q11.value)
   respostaIn.push(q12.value)
   respostaIn.push(q13.value)                /* se não, envia todas respostas pro vetor*/
   respostaIn.push(q14.value)
   respostaIn.push(q15.value)
   console.log(respostaIn)

}
/* (*) correção comparando com o gabarito indexado*/
if(respostaIn.length > 10){
  for (var index = ind; index < respostaIn.length; index++) {
    if(respostaIn[index] == gabarito[index]){acertos++}
   else if(respostaIn[index] != gabarito[index]){erros++}
  
    }
ind += 5
    console.log('erros:', erros, 'acertos:', acertos)
}


if(q11.value == 0 || q12.value == 0 || q13.value == 0 || q14.value == 0 || q15.value == 0){alert('Preencha todos os campos para prosseguir')}else{
blocoI.style.display= 'block'
blocoII.style.display= 'block'
 blocoIII.style.display= 'block'}

 /* (*)demonstracao em porcentagem de acertos*/
 /* (4)mensagem dependente da pontuacao*/

 if(acertos == 15 ){id_dodiv.innerHTML = `<h1 style="color:green">Meus parabéns, você acertou ${acertos} questões. ${(acertos/15 * 100).toFixed()}% de acerto não é pra qualquer um. </h1>`
  var fkUsuario = sessionStorage.ID_USUARIO;
  positivo = acertos
 negativo = erros
 quizIns(fkUsuario, positivo, negativo)
 }

 else if(acertos > 11 && acertos < 15 ){id_dodiv.innerHTML = `<h1 style="color:green">Meus parabéns, você acertou ${acertos} questões e errou somente ${erros}. seus ${(acertos/15 * 100).toFixed()}% de acerto demonstram alto nível de conhecimento sobre o Carpetman!</h1>`
  var fkUsuario = sessionStorage.ID_USUARIO;
  positivo = acertos
 negativo = erros
 quizIns(fkUsuario, positivo, negativo)
 }
 else if(acertos < 13 && acertos >= 7 ){id_dodiv.innerHTML = `<h1 style="color:yellow">Você acertou ${acertos} questões e errou ${erros}. seus ${(acertos/15 * 100).toFixed()}% de acerto demonstram que você sabe um pouquinho sobre o Carpetman!</h1>`
 var fkUsuario = sessionStorage.ID_USUARIO;
 positivo = acertos
 negativo = erros
  quizIns(fkUsuario, positivo, negativo)
 }


 else if(acertos < 7  ){id_dodiv.innerHTML = `<h1 style="color:red">Você acertou ${acertos} questões e errou ${erros}. ${(acertos/15 * 100).toFixed()}% de acerto? você sabe bem pouco sobre o Carpetman... ou será que chutou?</h1>`
 var fkUsuario = sessionStorage.ID_USUARIO;
 positivo = acertos
 negativo = erros
  quizIns(fkUsuario, positivo, negativo)
 }
 
if(q1.value == 'a'){q1.style.backgroundColor='green'}else{q1.style.backgroundColor='red'}
if(q2.value == 'a'){q2.style.backgroundColor='green'}else{q2.style.backgroundColor='red'}
if(q3.value == 'b'){q3.style.backgroundColor='green'}else{q3.style.backgroundColor='red'}
if(q4.value == 'a'){q4.style.backgroundColor='green'}else{q4.style.backgroundColor='red'}
if(q5.value == 'c'){q5.style.backgroundColor='green'}else{q5.style.backgroundColor='red'}
if(q6.value == 'c'){q6.style.backgroundColor='green'}else{q6.style.backgroundColor='red'}
if(q7.value == 'a'){q7.style.backgroundColor='green'}else{q7.style.backgroundColor='red'}
if(q8.value == 'a'){q8.style.backgroundColor='green'}else{q8.style.backgroundColor='red'}
if(q9.value == 'b'){q9.style.backgroundColor='green'}else{q9.style.backgroundColor='red'}
if(q10.value  == 'c'){q10.style.backgroundColor='green'}else{q10.style.backgroundColor='red'}
if(q11.value  == 'a'){q11.style.backgroundColor='green'}else{q11.style.backgroundColor='red'}
if(q12.value  == 'b'){q12.style.backgroundColor='green'}else{q12.style.backgroundColor='red'}
if(q13.value  == 'c'){q13.style.backgroundColor='green'}else{q13.style.backgroundColor='red'}
if(q14.value  == 'b'){q14.style.backgroundColor='green'}else{q14.style.backgroundColor='red'}
if(q15.value  == 'a'){q15.style.backgroundColor='green'}else{q15.style.backgroundColor='red'}


function quizIns(fkUsuario, positivo, negativo) {
 


    fetch(`http://localhost:8080/quizIns/${fkUsuario}/${positivo}/${negativo}`, {
        method: "POST",
      
    })
    .then(function (resposta) {
        console.log("resposta:", resposta);

        if (resposta.ok) {
            alert("Pontuação salva! ");
           

        } else if (resposta.status == 404) {
            alert("Rota não encontrada (404)");

        } else {
            throw ("Erro ao registrar pontuação! Código: " + resposta.status);
        }
    })
    .catch(function (erro) {
        console.log("#ERRO:", erro);
    });

    return true;
}

 




}





</script>

</html>

